# Config files containing hard coded variables
import sys
import yaml
import io
sys.path.append('../lib')  # in order to find our local packages
import mobaQcTools as mqc  # local moba package

# configfile: "configR3.yaml" # for running rotterdam3 tests
configfile: "config.yaml" 

#ensure bash as shell
shell.executable("/bin/bash")

# Runtime variables
include: "variables.py"
# A file with rule properites and ordering
with open("rules.yaml", 'r') as stream:
    rule_info = yaml.safe_load(stream)

# Report (top level)
report: "report/qc.rst"

# rule all
rule all:
    input:
	# final output:
        expand(config['output_base'] + 'mod5-shaping-preparation/tmp/hrc-update-complete-{chr}' + '{ext}', ext=['.bed','.bim','.fam'], chr=chrom),
	expand(config['output_base'] + '{role}/pca/final_pca_covars.txt', role=ROLES),
	config['output_base'] + 'sample_flag_list.txt'


# Include modules
include: "mod1-data-conversion.snake"
include: "mod2-core-cleaning.snake"
#include: "mod5-phasing-prep.snake"
