# QC Pipeline

The QC pipeline of MoBa genotypes is organized in different modules built using [SnakeMake](https://snakemake.readthedocs.io). The pipeline is executed on the [HUNT Cloud system](https://www.ntnu.edu/mh/huntcloud) using [Linux Ubuntu](https://ubuntu.com) as operating system and [conda](https://docs.conda.io) to manage environments. The pipeline is not tested and not intended to work on other platforms.

### Content
- [bin](bin): this folder contains executables used throughout the pipeline.
- [docs](docs/readme.md): this folder contains documentation generated by the QC pipeline.
- [env](env): this folder contains specification for the environment used for the execution of the pipeline.
- [resources](resources): this folder contains resources used in the pipeline.
- [snakefiles](snakefiles): this folder contains the SnakeMake files for the pipeline.

### Installation
Prior to execution, make sure that [SnakeMake](https://snakemake.readthedocs.io) and [conda](https://docs.conda.io) or equivalent are installed. Clone the repository, and install the conda environment specified in [snp_qc.yaml](env/snp_qc.yaml). Then, activate the environment using `snakemake activate snp_qc`.

### Execution
To execute the pipeline, navigate to the [snakefiles](snakefiles) folder and run `snakemake --snakefile Snakefile --use-conda`. You can set the number of cores using the `--cores n` option, and rerun incomplete rules using the `--rerun-incomplete` option.

### Parameters
- [Batch details](snakefiles/parameters/batch_details.py) contains information on the different batches.
- [General configuration](snakefiles/parameters/config.yaml) contains general parameters and paths.
- [Rules](snakefiles/parameters/rules.yaml) lists all the rules implemented in the different modules.
- [Variables](snakefiles/paraeters/variables) general variables used in the pipelines including paths and the list of batches to process. 
